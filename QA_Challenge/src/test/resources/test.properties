# E2E Test Configuration for Hedged TWR Testing
# These properties configure the test environment for black-box E2E testing

# ========== DATABASE CONFIGURATION ==========
# Postgres database containing portfolio data and audit events
test.db.url=jdbc:postgresql://localhost:5432/iam_test
test.db.user=test_user
test.db.password=test_pass
test.db.driver=org.postgresql.Driver

# Connection pool settings
test.db.pool.min=2
test.db.pool.max=10

# ========== API CONFIGURATION ==========
# ProdX API (vendor-supplied Docker image)
test.api.url=http://localhost:8080
test.api.timeout.ms=10000

# API endpoints
test.api.hedged.endpoint=/pricing/v2/hedged
test.api.health.endpoint=/health

# ========== WEB UI CONFIGURATION ==========
# React front-end (WebCo - Vite + TypeScript)
test.web.url=http://localhost:3000

# ========== BROWSER CONFIGURATION (Playwright) ==========
# Browser type: chromium, firefox, webkit
test.browser.type=chromium

# Headless mode (true for CI/CD, false for local debugging)
test.browser.headless=true

# Browser viewport
test.browser.width=1920
test.browser.height=1080

# Screenshots on failure
test.browser.screenshot.onFailure=true
test.browser.screenshot.dir=target/screenshots

# ========== TIMEOUTS ==========
# Page load timeout
test.timeout.pageload.ms=30000

# Element wait timeout
test.timeout.element.ms=10000

# API call timeout
test.timeout.api.ms=5000

# ========== RETRY CONFIGURATION ==========
# Maximum retry attempts for API calls (AC4)
test.retry.max.attempts=3

# Delay between retries (ms)
test.retry.delay.ms=1000

# ========== AUDIT CONFIGURATION ==========
# Audit table name
test.audit.table=audit.fx_hedge_requests

# Audit event types
test.audit.event.get_hedged_twr=GET_HEDGED_TWR
test.audit.event.export_pdf=EXPORT_PDF

# ========== FEATURE FLAGS ==========
# Hedging feature flag (AC2)
test.feature.hedge.flag=X-HEDGE-ENABLED

# ========== TEST DATA ==========
# Test portfolio IDs
test.portfolio.basic=qa-hedge-001
test.portfolio.multicurrency=qa-hedge-003
test.portfolio.bug101=qa-hedge-003

# Test user credentials
test.user.email=test-manager@iam.com
test.user.password=test-password-123

# ========== PRECISION SETTINGS ==========
# Internal calculation precision (6 decimal places)
test.precision.internal=6

# Display precision (4 decimal places - AC3)
test.precision.display=4

# ========== ENVIRONMENT ==========
# Target environment: local, dev, int, prod
test.environment=local

# ========== LOGGING ==========
# Log level: DEBUG, INFO, WARN, ERROR
test.log.level=INFO

# Log directory
test.log.dir=target/logs

# ========== PDF VALIDATION ==========
# PDF export timeout (ms)
test.pdf.download.timeout.ms=10000

# PDF validation library
test.pdf.parser=pdfbox

# ========== PERFORMANCE THRESHOLDS ==========
# Maximum acceptable API latency (AC4)
test.performance.api.max.latency.ms=1000

# Maximum acceptable page load time
test.performance.page.max.load.ms=3000

# ========== CI/CD INTEGRATION ==========
# Report format: html, json, junit
test.report.format=html,json,junit

# Report output directory
test.report.dir=target/cucumber-reports
