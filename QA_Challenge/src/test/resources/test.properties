# E2E Test Configuration for Hedged TWR Testing
# These properties configure the test environment for black-box E2E testing

# ========== DATABASE CONFIGURATION ==========
# Postgres database containing portfolio data and audit events
test.db.url=jdbc:postgresql://localhost:5432/iam_test
test.db.user=test_user
test.db.password=test_pass
test.db.driver=org.postgresql.Driver

# Connection pool settings
test.db.pool.min=2
test.db.pool.max=10

# ========== API CONFIGURATION ==========
# ProdX API (vendor-supplied Docker image)
test.api.url=http://localhost:8080

# API endpoints
test.api.hedged.endpoint=/pricing/v2/hedged
# ========== WEB UI CONFIGURATION ==========
# React front-end (WebCo - Vite + TypeScript)
test.web.url=http://localhost:3000

# ========== BROWSER CONFIGURATION (Playwright) ==========
# Browser type: chromium, firefox, safari(webkit)
test.browser.type=chromium

# Headless mode (true for CI/CD, false for local debugging)
test.browser.headless=true

# Browser viewport
test.browser.width=1920
test.browser.height=1080

# ========== TIMEOUTS ==========
# Page load timeout
test.timeout.pageload.ms=30000

# Element wait timeout
test.timeout.element.ms=10000

# API call timeout
test.timeout.api.ms=5000

# ========== RETRY CONFIGURATION ==========
# Maximum retry attempts for API calls (AC4)
test.retry.max.attempts=3

# Delay between retries (ms)
test.retry.delay.ms=1000

# ========== AUDIT CONFIGURATION ==========
# Audit table name
test.audit.table=audit.fx_hedge_requests

# Audit event types
test.audit.event.get_hedged_twr=GET_HEDGED_TWR

# ========== OPS CONFIGURATION ==========
# Operational feature flags (managed by Ops team via config files, NOT database)
# These flags control feature availability without code deployment

# Hedging feature flag name (AC2)
test.feature.hedge.flag=X-HEDGE-ENABLED

# Hedging feature flag state (true=enabled, false=disabled)
# In production, Ops would manage this via config management system (e.g., Consul, etcd)
# For testing, we control this via system properties or test-specific configuration
test.feature.hedge.enabled=true

# ========== TEST DATA ==========
# Test portfolio IDs
test.portfolio.basic=qa-hedge-001
test.portfolio.multicurrency=qa-hedge-003
test.portfolio.bug101=qa-hedge-003

# Test user credentials
test.user.email=test-manager@iam.com
test.user.password=test-password-123

# ========== PRECISION SETTINGS ==========
# Internal calculation precision (6 decimal places)
test.precision.internal=6

# Display precision (4 decimal places - AC3)
test.precision.display=4

# ========== ENVIRONMENT ==========
# Target environment: local, dev, int
test.environment=local

# ========== LOGGING ==========
# Log level: DEBUG, INFO, WARN, ERROR
test.log.level=INFO

# Log directory
test.log.dir=target/logs

# ========== PERFORMANCE THRESHOLDS ==========
# Maximum acceptable API latency (AC4)
test.performance.api.max.latency.ms=1000

# ========== CI/CD INTEGRATION ==========
# Report format: html, json, junit
test.report.format=html,json,junit

# Report output directory
test.report.dir=target/cucumber-reports
